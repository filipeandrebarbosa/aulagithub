âœ… Estrutura Final (Correta)
Include/features/Smoke/UserAccess/Login.feature


Test Cases/Step Definitions/UserAccess/LoginSteps.groovy


Keywords/Pages/Common/BasePage.groovy
Keywords/Pages/UserAccess/LoginPage.groovy


Object Repository/Pages/UserAccess/Login/
   input_username
   input_password
   btn_signIn
   dashboard_home
   login_error_message   (vais criar este para erro)


Data Files/LoginUsers.xlsx
   Sheets:
     ValidCredentials
     InvalidCredentials
     loginExtranet
âœ… 1) Login.feature (Scenario Outline com Excel)

ðŸ“Œ Include/features/Smoke/UserAccess/Login.feature

Feature: User Login


  As a user of the system
  I want to login with valid or invalid credentials
  So that authentication is validated correctly


  @smoke @login
  Scenario Outline: Login validation with different credentials


    Given the user opens the browser
    And the user navigates to the login page


    When the user logs in as "<role>" using "<sheet>"


    Then the login result should be "<expectedResult>"


    Examples:
      | role        | sheet               | expectedResult |
      | Admin       | ValidCredentials    | success        |
      | Admin       | InvalidCredentials  | error          |
      | Approver 1  | ValidCredentials    | success        |
      | Approver 1  | InvalidCredentials  | error          |
âœ… 2) LoginSteps.groovy

ðŸ“Œ Test Cases â†’ Step Definitions â†’ UserAccess â†’ LoginSteps

package stepDefinitions.UserAccess


import com.kms.katalon.core.webui.keyword.WebUiBuiltInKeywords as WebUI


import cucumber.api.java.en.Given
import cucumber.api.java.en.When
import cucumber.api.java.en.Then


import Pages.UserAccess.LoginPage




class LoginSteps {


    LoginPage loginPage = new LoginPage()




    @Given("the user opens the browser")
    def openBrowser() {
        WebUI.openBrowser("")
        WebUI.maximizeWindow()
    }


    @Given("the user navigates to the login page")
    def navigateToLoginPage() {
        loginPage.goToLoginPage()
    }


    @When("the user logs in as {string} using {string}")
    def loginUsingExcel(String role, String sheet) {
        loginPage.loginWithRole(role, sheet)
    }


    @Then("the login result should be {string}")
    def verifyLoginResult(String expectedResult) {


        if (expectedResult.equalsIgnoreCase("success")) {
            loginPage.verifyLoginSuccess()
        }
        else if (expectedResult.equalsIgnoreCase("error")) {
            loginPage.verifyLoginError()
        }
        else {
            throw new Exception("Invalid expectedResult: " + expectedResult)
        }


        WebUI.closeBrowser()
    }
}
âœ… 3) BasePage.groovy

ðŸ“Œ Keywords/Pages/Common/BasePage.groovy

package Pages.Common


import com.kms.katalon.core.webui.keyword.WebUiBuiltInKeywords as WebUI
import com.kms.katalon.core.model.FailureHandling




class BasePage {


    def waitForElement(def testObject, int timeout = 10) {
        WebUI.waitForElementVisible(
            testObject,
            timeout,
            FailureHandling.STOP_ON_FAILURE
        )
    }


    def click(def testObject) {
        waitForElement(testObject)
        WebUI.click(testObject)
    }


    def type(def testObject, String text) {
        waitForElement(testObject)
        WebUI.setText(testObject, text)
    }


    def verifyElementPresent(def testObject) {
        WebUI.verifyElementPresent(
            testObject,
            10,
            FailureHandling.STOP_ON_FAILURE
        )
    }
}
âœ… 4) LoginPage.groovy (Excel + Success/Error)

ðŸ“Œ Keywords/Pages/UserAccess/LoginPage.groovy

package Pages.UserAccess


import static com.kms.katalon.core.testobject.ObjectRepository.findTestObject
import static com.kms.katalon.core.testdata.TestDataFactory.findTestData


import com.kms.katalon.core.testdata.TestData
import com.kms.katalon.core.webui.keyword.WebUiBuiltInKeywords as WebUI


import internal.GlobalVariable


import Pages.Common.BasePage




class LoginPage extends BasePage {


    // Login page objects
    def usernameField = findTestObject("Pages/UserAccess/Login/input_username")
    def passwordField = findTestObject("Pages/UserAccess/Login/input_password")
    def signInButton  = findTestObject("Pages/UserAccess/Login/btn_signIn")


    // Post-login validation objects
    def dashboardElement = findTestObject("Pages/UserAccess/Login/dashboard_home")


    // Error validation object (create in OR)
    def loginErrorMessage = findTestObject("Pages/UserAccess/Login/login_error_message")




    // Navigate
    def goToLoginPage() {
        WebUI.navigateToUrl(GlobalVariable.baseUrl + "/login")
    }




    // Excel Role Login
    def loginWithRole(String role, String sheetName) {


        TestData data = findTestData("LoginUsers")
        data.changeSheet(sheetName)


        for (int i = 1; i <= data.getRowNumbers(); i++) {


            String excelRole = data.getValue("role", i)


            if (excelRole != null && excelRole.equalsIgnoreCase(role)) {


                String username = data.getValue("user", i)
                String password = data.getValue("password", i)


                println("===================================")
                println("Logging in with role: " + role)
                println("Sheet: " + sheetName)
                println("Username: " + username)
                println("===================================")


                type(usernameField, username)
                type(passwordField, password)
                click(signInButton)


                return
            }
        }


        throw new Exception("Role not found in Excel: " + role + " (Sheet: " + sheetName + ")")
    }




    // Success Validation
    def verifyLoginSuccess() {
        verifyElementPresent(dashboardElement)
    }




    // Error Validation
âœ… 5) Object Repository obrigatÃ³rio para erro

Tu jÃ¡ tens:

dashboard_home

Agora precisas de criar mais um object:

ðŸ“Œ

Object Repository/Pages/UserAccess/Login/login_error_message

XPath tÃ­pico:

//div[contains(@class,'error')]

ou

//*[contains(text(),'Invalid credentials')]

(depende da tua app)
