âœ… 1) Login.feature

ðŸ“Œ Include/features/Smoke/UserAccess/Login.feature

Feature: User Login


  As a user of the system
  I want to login with valid or invalid credentials
  So that authentication is validated correctly


  @smoke @login
  Scenario Outline: Login validation with different credentials


    Given the user opens the browser
    And the user navigates to the login page


    When the user logs in as "<role>" using "<sheet>"


    Then the login result should be "<expectedResult>"


    Examples:
      | role        | sheet               | expectedResult |
      | Admin       | ValidCredentials    | success        |
      | Admin       | InvalidCredentials  | error          |
      | Approver 1  | ValidCredentials    | success        |
      | Approver 1  | InvalidCredentials  | error          |
âœ… 2) LoginSteps.groovy

ðŸ“Œ Step Definitions/UserAccess/LoginSteps.groovy

package stepDefinitions.UserAccess


import com.kms.katalon.core.webui.keyword.WebUiBuiltInKeywords as WebUI


import cucumber.api.java.en.Given
import cucumber.api.java.en.When
import cucumber.api.java.en.Then


import Pages.UserAccess.LoginPage


class LoginSteps {


    LoginPage loginPage = new LoginPage()


    @Given("the user opens the browser")
    def openBrowser() {
        WebUI.openBrowser("")
        WebUI.maximizeWindow()
    }


    @Given("the user navigates to the login page")
    def navigateToLoginPage() {
        loginPage.goToLoginPage()
    }


    @When("the user logs in as {string} using {string}")
    def loginUsingExcel(String role, String sheet) {
        loginPage.loginWithRole(role, sheet)
    }


    @Then("the login result should be {string}")
    def verifyLoginResult(String expectedResult) {


        if (expectedResult.equalsIgnoreCase("success")) {
            loginPage.verifyLoginSuccess()
        }
        else if (expectedResult.equalsIgnoreCase("error")) {
            loginPage.verifyLoginError()
        }
        else {
            throw new Exception("Unknown expectedResult: " + expectedResult)
        }


        WebUI.closeBrowser()
    }
}
âœ… 3) BasePage.groovy

ðŸ“Œ Keywords/Pages/Common/BasePage.groovy

package Pages.Common


import com.kms.katalon.core.webui.keyword.WebUiBuiltInKeywords as WebUI
import com.kms.katalon.core.model.FailureHandling


class BasePage {


    def waitForElement(def obj, int timeout = 10) {
        WebUI.waitForElementVisible(obj, timeout, FailureHandling.STOP_ON_FAILURE)
    }


    def click(def obj) {
        waitForElement(obj)
        WebUI.click(obj)
    }


    def type(def obj, String text) {
        waitForElement(obj)
        WebUI.setText(obj, text)
    }


    def verifyPresent(def obj) {
        WebUI.verifyElementPresent(obj, 10, FailureHandling.STOP_ON_FAILURE)
    }
}
âœ… 4) LoginPage.groovy (Excel Driven)

ðŸ“Œ Keywords/Pages/UserAccess/LoginPage.groovy

package Pages.UserAccess


import static com.kms.katalon.core.testobject.ObjectRepository.findTestObject
import static com.kms.katalon.core.testdata.TestDataFactory.findTestData


import com.kms.katalon.core.testdata.TestData
import com.kms.katalon.core.webui.keyword.WebUiBuiltInKeywords as WebUI


import internal.GlobalVariable
import Pages.Common.BasePage


class LoginPage extends BasePage {


    // Login fields
    def usernameField = findTestObject("Pages/UserAccess/Login/input_username")
    def passwordField = findTestObject("Pages/UserAccess/Login/input_password")
    def signInButton  = findTestObject("Pages/UserAccess/Login/btn_signIn")


    // Validation objects
    def dashboardHome = findTestObject("Pages/UserAccess/Login/dashboard_home")
    def loginErrorMsg = findTestObject("Pages/UserAccess/Login/login_error_message")


    // Navigate
    def goToLoginPage() {
        WebUI.navigateToUrl(GlobalVariable.baseUrl + "/login")
    }


    // Login using Excel role + sheet
    def loginWithRole(String role, String sheetName) {


        TestData data = findTestData("LoginUsers")
        data.changeSheet(sheetName)


        for (int i = 1; i <= data.getRowNumbers(); i++) {


            String excelRole = data.getValue("role", i)


            if (excelRole != null && excelRole.equalsIgnoreCase(role)) {


                String username = data.getValue("user", i)
                String password = data.getValue("password", i)


                type(usernameField, username)
                type(passwordField, password)
                click(signInButton)


                return
            }
        }


        throw new Exception("Role not found in Excel: " + role + " in sheet " + sheetName)
    }


    // Success check
    def verifyLoginSuccess() {
        verifyPresent(dashboardHome)
    }


    // Error check
    def verifyLoginError() {
        verifyPresent(loginErrorMsg)
    }
}
âœ… 5) Object Repository (obrigatÃ³rio)

Tu tens de criar estes 5 objects:

Nome	XPath exemplo
input_username	//input[@name='username']
input_password	//input[@name='password']
btn_signIn	//button[@type='submit']
dashboard_home	//h1[@class='maintitle']
login_error_message	//div[contains(@class,'error')]
âœ… 6) Profile QA.glbl

ðŸ“Œ Profiles/QA.glbl

SÃ³ precisas disto:

Variable	Value
baseUrl	https://qa-teusite

Excel trata do resto.
